#include<stdio.h>
#include<stdlib.h>
#include <sys/resource.h>


int partition(int number[], int first, int last){
    
    int pivot = number[last];
        int j = first;
        int tmp;
        for (int i = first; i <= last; i++) {
            if (number[i] < pivot) {
                tmp = number[i];
                number[i] = number[j];
                number[j] = tmp;
                j++;
            }
        }
        tmp = number[last];
        number[last] = number[j];
        number[j] = tmp;

        return j;
}


void quicksort(int number[],int first, int last){


   if(first<last){
       
      int p = partition(number,first,last);
      
      quicksort(number,first,p-1);
      quicksort(number,p+1,last);

   }
}

int main(int argc, char** argv){
   int i, count = 6;

    int small[] = {529, 83, 90, 688, 391, 139, 494, 203, 823, 873, 327, 568, 759, 176, 25, 500, 88, 756, 587, 278, 404, 92, 133, 815, 355, 220, 852, 894, 173, 611, 606, 118, 977, 954, 878, 721, 224, 705, 543, 939, 436, 274, 723, 666, 692, 237, 819, 235, 305, 502, 170, 972, 17, 426, 236, 580, 260, 465, 571, 338, 887, 427, 890, 623, 702, 48, 978, 837, 186, 29, 904, 14, 493, 140, 945, 590, 984, 827, 517, 847, 544, 697, 169, 895, 164, 733, 599, 940, 31, 7, 60, 839, 526, 334, 107, 287, 537, 999, 511, 647, 109, 65, 178, 949, 398, 561, 686, 369, 221, 793, 489, 775, 299, 119, 595, 434, 681, 158, 575, 524, 509, 682, 792, 743, 713, 660, 121, 419, 323, 677, 82, 701, 934, 152, 476, 995, 925, 918, 474, 62, 845, 876, 160, 897, 789, 912, 865, 834, 790, 263, 143, 799, 604, 751, 460, 892, 34, 706, 172, 15, 540, 79, 605, 842, 901, 197, 157, 786, 813, 612, 868, 523, 765, 846, 757, 193, 402, 394, 627, 9, 863, 337, 106, 929, 552, 49, 54, 941, 362, 549, 592, 315, 884, 626, 468, 699, 346, 425, 396, 242, 154, 37, 588, 155, 777, 456, 467, 788, 407, 330, 300, 266, 134, 828, 817, 42, 309, 380, 649, 276, 481, 149, 872, 948, 303, 296, 820, 603, 514, 147, 737, 185, 919, 883, 383, 213, 35, 120, 835, 336, 672, 97, 196, 709, 378, 763, 269, 406, 44, 542, 359, 831, 207, 345, 685, 281, 214, 110, 908, 390, 311, 469, 410, 285, 648, 555, 321, 215, 601, 89, 486, 288, 849, 267, 349, 911, 259, 458, 367, 968, 564, 771, 389, 951, 328, 690, 251, 77, 123, 731, 663, 962, 479, 565, 856, 749, 993, 384, 957, 277, 772, 979, 325, 335, 312, 600, 893, 5, 602, 174, 501, 864, 753, 16, 532, 264, 515, 455, 32, 783, 944, 553, 372, 433, 262, 974, 23, 680, 747, 39, 921, 52, 960, 963, 980, 559, 24, 64, 177, 191, 80, 283, 183, 366, 652, 930, 609, 583, 306, 732, 579, 1000, 250, 310, 247, 339, 135, 354, 870, 541, 171, 314, 722, 375, 74, 933, 254, 108, 2, 955, 376, 651, 188, 594, 12, 341, 1, 877, 234, 758, 146, 907, 572, 655, 795, 457, 750, 342, 631, 289, 610, 238, 46, 381, 861, 102, 450, 593, 162, 272, 344, 855, 589, 231, 441, 490, 869, 780, 33, 138, 983, 36, 674, 395, 927, 943, 760, 538, 704, 971, 98, 209, 202, 180, 257, 361, 516, 41, 73, 292, 936, 687, 453, 245, 233, 28, 492, 567, 607, 268, 400, 63, 633, 584, 482, 982, 833, 518, 825, 689, 153, 818, 198, 851, 782, 304, 822, 632, 415, 27, 923, 371, 418, 8, 554, 658, 916, 727, 879, 843, 899, 298, 695, 430, 832, 294, 598, 130, 55, 451, 787, 280, 762, 991, 466, 711, 620, 874, 471, 545, 888, 802, 478, 293, 57, 710, 137, 225, 716, 614, 679, 206, 253, 535, 650, 656, 505, 629, 58, 485, 124, 742, 70, 59, 915, 646, 596, 85, 740, 184, 142, 615, 659, 988, 700, 232, 712, 985, 654, 100, 585, 307, 423, 3, 989, 841, 22, 997, 308, 657, 769, 830, 798, 150, 347, 644, 994, 199, 591, 56, 958, 931, 664, 81, 840, 429, 45, 628, 488, 386, 964, 574, 417, 192, 393, 920, 230, 506, 4, 566, 776, 84, 19, 576, 619, 484, 370, 50, 252, 854, 938, 724, 707, 397, 816, 739, 499, 243, 616, 902, 653, 547, 464, 368, 374, 477, 163, 168, 693, 665, 766, 781, 141, 910, 720, 546, 286, 582, 452, 273, 698, 624, 661, 708, 244, 741, 935, 348, 211, 678, 382, 860, 670, 896, 408, 703, 353, 43, 744, 324, 181, 539, 241, 195, 641, 340, 519, 10, 431, 748, 717, 101, 439, 53, 413, 26, 20, 388, 859, 969, 671, 483, 850, 752, 953, 987, 625, 728, 551, 216, 205, 548, 326, 774, 942, 473, 208, 319, 507, 675, 112, 966, 316, 829, 807, 909, 228, 961, 536, 61, 871, 838, 356, 447, 746, 718, 970, 956, 959, 905, 454, 726, 903, 302, 270, 794, 618, 622, 200, 432, 201, 836, 320, 694, 145, 634, 885, 318, 104, 194, 531, 714, 329, 261, 210, 715, 560, 796, 271, 520, 669, 472, 448, 405, 166, 385, 848, 725, 597, 814, 779, 990, 932, 853, 333, 528, 881, 38, 95, 40, 470, 239, 676, 550, 522, 924, 797, 331, 75, 392, 947, 144, 132, 217, 950, 226, 804, 409, 99, 992, 218, 635, 736, 662, 475, 891, 497, 86, 87, 498, 424, 803, 639, 886, 967, 94, 510, 204, 812, 821, 667, 182, 440, 297, 212, 275, 66, 437, 922, 13, 581, 255, 882, 981, 630, 358, 557, 730, 72, 428, 438, 866, 952, 449, 684, 637, 136, 68, 416, 364, 167, 291, 578, 165, 784, 411, 249, 219, 332, 824, 76, 116, 811, 129, 569, 343, 93, 805, 222, 96, 21, 533, 240, 770, 673, 351, 645, 435, 946, 844, 809, 227, 128, 914, 996, 508, 446, 785, 127, 412, 928, 69, 113, 556, 175, 301, 503, 768, 573, 668, 880, 512, 11, 190, 360, 352, 131, 683, 913, 256, 917, 47, 387, 586, 399, 898, 621, 738, 71, 223, 117, 313, 862, 151, 248, 443, 159, 719, 229, 459, 875, 156, 461, 998, 148, 421, 640, 30, 6, 691, 530, 403, 613, 322, 521, 764, 103, 282, 401, 115, 179, 973, 735, 761, 161, 800, 826, 636, 78, 377, 729, 534, 91, 906, 810, 570, 525, 562, 504, 462, 778, 258, 373, 290, 734, 643, 608, 617, 187, 513, 445, 558, 122, 767, 350, 696, 755, 420, 279, 379, 791, 773, 976, 808, 563, 265, 18, 284, 986, 937, 111, 801, 975, 363, 642, 806, 463, 365, 857, 246, 577, 638, 495, 105, 965, 189, 889, 357, 527, 496, 858, 745, 125, 444, 900, 317, 422, 491, 67, 867, 926, 442, 126, 487, 480, 754, 414, 295, 51, 114};
    int nsmall = sizeof(small) / sizeof(int);
    
    quicksort(small,0,nsmall-1);

    struct rusage r_usage;

    FILE * fp = fopen("quicksortSmall.txt","a");
    
    getrusage(RUSAGE_SELF,&r_usage);
    fprintf(fp,"%ld,", r_usage.ru_maxrss);
    fflush(fp);

   return 0;
}